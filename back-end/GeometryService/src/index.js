// const express = require("express");
// const cors = require("cors");
// const helmet = require("helmet");
// const morgan = require("morgan");
// const bodyParser = require("body-parser");

// const config = require("./config");
// global.gConfig = config;

// const route = require("./routes");
// const errorMiddleware = require("./middleware/error-middleware");

// const app = express();
// app.use(cors());
// app.use(helmet());
// app.use(morgan("combined"));
// app.use(bodyParser.json());
// app.use(bodyParser.urlencoded({ extended: true }));

// app.use(route);
// app.use(errorMiddleware);

// const PORT = global.gConfig.node_port || 3005;
// app.listen(PORT, () => {
//   console.log(`Server listening on port ${PORT}...`);
// });

const geolib = require("geolib");
const polyline = require("@mapbox/polyline");
// console.log(
//   geolib.getDistance(
//     { latitude: 13.71463673576878, longitude: 100.47833670890736 },
//     { latitude: 13.71439025285619, longitude: 100.47837715071228 },
//     0.001
//   ) <= 100
// );

const b = [
  [13.70086, 100.51840000000001],
  [13.700130000000001, 100.51785000000001],
  [13.699980000000002, 100.51773000000001],
  [13.699840000000002, 100.51793],
  [13.699800000000002, 100.51795000000001],
  [13.699750000000002, 100.51794000000001],
  [13.699510000000002, 100.51777000000001],
  [13.69851, 100.51702],
  [13.697350000000002, 100.51617],
  [13.69706, 100.51598000000001],
  [13.696470000000001, 100.51556000000001],
  [13.696060000000001, 100.51526000000001],
  [13.694420000000001, 100.51399],
  [13.692820000000001, 100.51293000000001],
  [13.692110000000001, 100.51252000000001],
  [13.691450000000001, 100.51218000000001],
  [13.691640000000001, 100.51183],
  [13.69189, 100.51129],
  [13.692000000000002, 100.51105000000001],
  [13.691540000000002, 100.51079000000001],
  [13.690990000000001, 100.51048],
  [13.69059, 100.51018],
  [13.69039, 100.51002000000001],
  [13.68974, 100.50956000000001],
  [13.689610000000002, 100.50947000000001],
  [13.689530000000001, 100.50936000000002],
  [13.68946, 100.50924],
  [13.6895, 100.50908000000001],
  [13.689520000000002, 100.50887],
  [13.68955, 100.50849000000001],
  [13.68959, 100.50789],
  [13.689720000000001, 100.50611],
  [13.68978, 100.50584],
  [13.689810000000001, 100.50558000000001],
  [13.689840000000002, 100.50537000000001],
  [13.689910000000001, 100.50491000000001],
  [13.690030000000002, 100.50446000000001],
  [13.690370000000001, 100.50367000000001],
  [13.690570000000001, 100.50335000000001],
  [13.69073, 100.50314],
  [13.691170000000001, 100.50256],
  [13.691350000000002, 100.50234],
  [13.691600000000001, 100.50211],
  [13.691970000000001, 100.50176],
  [13.69292, 100.50088000000001],
  [13.6933, 100.5005],
  [13.69386, 100.50002],
  [13.69546, 100.49857000000002],
  [13.69654, 100.4976],
  [13.696800000000001, 100.49733],
  [13.697020000000002, 100.49711],
  [13.697130000000001, 100.49701],
  [13.6986, 100.49567],
  [13.69913, 100.49516000000001],
  [13.699670000000001, 100.49458000000001],
  [13.700520000000001, 100.49352],
  [13.700920000000002, 100.49296000000001],
  [13.70119, 100.49253],
  [13.701600000000001, 100.49179000000001],
  [13.702190000000002, 100.49052],
  [13.702240000000002, 100.49035],
  [13.702490000000001, 100.48962],
  [13.70269, 100.48909],
  [13.702990000000002, 100.48846],
  [13.703090000000001, 100.48829],
  [13.704670000000002, 100.48571000000001],
  [13.705020000000001, 100.48507000000001],
  [13.705950000000001, 100.48349],
  [13.706190000000001, 100.48306000000001],
  [13.70625, 100.48292000000001],
  [13.706520000000001, 100.48253000000001],
  [13.706750000000001, 100.48218000000001],
  [13.707120000000002, 100.48173000000001],
  [13.707500000000001, 100.48134],
  [13.70785, 100.48099],
  [13.708390000000001, 100.48056000000001],
  [13.708860000000001, 100.48021000000001],
  [13.709060000000001, 100.48006000000001],
  [13.70944, 100.47984000000001],
  [13.710630000000002, 100.47928],
  [13.710980000000001, 100.47916000000001],
  [13.71113, 100.4791],
  [13.711680000000001, 100.47895000000001],
  [13.7124, 100.47879],
  [13.71334, 100.47860000000001],
  [13.714160000000001, 100.47843],
  [13.714620000000002, 100.47832000000001],
  [13.71493, 100.47827000000001],
  [13.715390000000001, 100.47819000000001],
  [13.715560000000002, 100.47816],
  [13.716070000000002, 100.47806000000001],
  [13.71657, 100.47794],
  [13.717350000000001, 100.47781],
  [13.7178, 100.47770000000001],
  [13.718010000000001, 100.47766000000001],
  [13.718100000000002, 100.47764000000001],
  [13.71817, 100.47756000000001],
  [13.71822, 100.47753],
  [13.71902, 100.47735],
  [13.71996, 100.47715000000001],
  [13.719940000000001, 100.47703000000001]
];

const dd = [
  { lat: 13.700870000000002, lng: 100.51841 },
  { lat: 13.70109, lng: 100.51856000000001 },
  { lat: 13.70142, lng: 100.51887 },
  { lat: 13.701630000000002, lng: 100.51904 },
  { lat: 13.70236, lng: 100.51962 },
  { lat: 13.702700000000002, lng: 100.51993 },
  { lat: 13.70292, lng: 100.52013000000001 },
  { lat: 13.703080000000002, lng: 100.51984 },
  { lat: 13.703170000000002, lng: 100.51968000000001 },
  { lat: 13.70348, lng: 100.51917 },
  { lat: 13.703800000000001, lng: 100.51851 },
  { lat: 13.703940000000001, lng: 100.51797 },
  { lat: 13.704020000000002, lng: 100.5177 },
  { lat: 13.704070000000002, lng: 100.51753000000001 },
  { lat: 13.70396, lng: 100.51748 },
  { lat: 13.703090000000001, lng: 100.51708 },
  { lat: 13.70273, lng: 100.51688000000001 },
  { lat: 13.702000000000002, lng: 100.51646000000001 },
  { lat: 13.700550000000002, lng: 100.51562000000001 },
  { lat: 13.700130000000001, lng: 100.51538000000001 },
  { lat: 13.699950000000001, lng: 100.51528 },
  { lat: 13.699980000000002, lng: 100.51522000000001 },
  { lat: 13.700000000000001, lng: 100.51517000000001 },
  { lat: 13.700610000000001, lng: 100.51552000000001 },
  { lat: 13.70105, lng: 100.51577 },
  { lat: 13.70146, lng: 100.51601000000001 },
  { lat: 13.702650000000002, lng: 100.51670000000001 },
  { lat: 13.70307, lng: 100.51692000000001 },
  { lat: 13.70401, lng: 100.51737000000001 },
  { lat: 13.70429, lng: 100.51749000000001 },
  { lat: 13.705480000000001, lng: 100.51802 },
  { lat: 13.70639, lng: 100.51827 },
  { lat: 13.707930000000001, lng: 100.51864 },
  { lat: 13.708060000000001, lng: 100.51868 },
  { lat: 13.708350000000001, lng: 100.51872 },
  { lat: 13.708850000000002, lng: 100.51876000000001 },
  { lat: 13.709150000000001, lng: 100.51878 },
  { lat: 13.70931, lng: 100.51883000000001 },
  { lat: 13.709420000000001, lng: 100.51886 },
  { lat: 13.710070000000002, lng: 100.51901000000001 },
  { lat: 13.710870000000002, lng: 100.51917 },
  { lat: 13.712130000000002, lng: 100.51957 },
  { lat: 13.712510000000002, lng: 100.51968000000001 },
  { lat: 13.71316, lng: 100.5198 },
  { lat: 13.71372, lng: 100.51983000000001 },
  { lat: 13.714250000000002, lng: 100.51988000000001 },
  { lat: 13.714630000000001, lng: 100.51987000000001 },
  { lat: 13.714920000000001, lng: 100.51985 },
  { lat: 13.715700000000002, lng: 100.51974000000001 },
  { lat: 13.715980000000002, lng: 100.51969000000001 },
  { lat: 13.716230000000001, lng: 100.51961000000001 },
  { lat: 13.716750000000001, lng: 100.51946000000001 },
  { lat: 13.71831, lng: 100.51901000000001 },
  { lat: 13.718900000000001, lng: 100.51885000000001 },
  { lat: 13.720160000000002, lng: 100.51842 },
  { lat: 13.721240000000002, lng: 100.51813000000001 },
  { lat: 13.72254, lng: 100.51780000000001 },
  { lat: 13.722880000000002, lng: 100.51773000000001 },
  { lat: 13.72357, lng: 100.51759000000001 },
  { lat: 13.724200000000002, lng: 100.51752 },
  { lat: 13.72517, lng: 100.51744000000001 },
  { lat: 13.725560000000002, lng: 100.51741000000001 },
  { lat: 13.726260000000002, lng: 100.51739 },
  { lat: 13.727, lng: 100.51738 },
  { lat: 13.72741, lng: 100.51739 },
  { lat: 13.72808, lng: 100.51735000000001 },
  { lat: 13.7284, lng: 100.51734 },
  { lat: 13.729510000000001, lng: 100.51735000000001 },
  { lat: 13.729680000000002, lng: 100.51736000000001 },
  { lat: 13.73032, lng: 100.51737000000001 },
  { lat: 13.7306, lng: 100.51739 },
  { lat: 13.731460000000002, lng: 100.51750000000001 },
  { lat: 13.73258, lng: 100.51766 },
  { lat: 13.732840000000001, lng: 100.51771000000001 },
  { lat: 13.732990000000001, lng: 100.51775 },
  { lat: 13.7331, lng: 100.51773000000001 },
  { lat: 13.73352, lng: 100.51780000000001 },
  { lat: 13.73403, lng: 100.51793 },
  { lat: 13.734530000000001, lng: 100.51807000000001 },
  { lat: 13.73483, lng: 100.51815 },
  { lat: 13.735040000000001, lng: 100.51823 },
  { lat: 13.73534, lng: 100.51839000000001 },
  { lat: 13.735590000000002, lng: 100.51856000000001 },
  { lat: 13.736590000000001, lng: 100.51889000000001 },
  { lat: 13.736730000000001, lng: 100.51893000000001 },
  { lat: 13.736790000000001, lng: 100.51881 },
  { lat: 13.73709, lng: 100.51814 },
  { lat: 13.737530000000001, lng: 100.51705000000001 },
  { lat: 13.737680000000001, lng: 100.51657 },
  { lat: 13.73773, lng: 100.51622 },
  { lat: 13.737760000000002, lng: 100.51605 },
  { lat: 13.73779, lng: 100.51594000000001 },
  { lat: 13.738050000000001, lng: 100.51536 },
  { lat: 13.73826, lng: 100.51503000000001 },
  { lat: 13.738460000000002, lng: 100.51474 },
  { lat: 13.738780000000002, lng: 100.51437000000001 },
  { lat: 13.73953, lng: 100.51343000000001 },
  { lat: 13.73961, lng: 100.51335 },
  { lat: 13.739820000000002, lng: 100.51306000000001 },
  { lat: 13.74003, lng: 100.51277 },
  { lat: 13.74036, lng: 100.51239000000001 },
  { lat: 13.740450000000001, lng: 100.51235000000001 },
  { lat: 13.740670000000001, lng: 100.51253000000001 },
  { lat: 13.74103, lng: 100.51279000000001 },
  { lat: 13.741570000000001, lng: 100.51314 },
  { lat: 13.74187, lng: 100.51332000000001 },
  { lat: 13.741940000000001, lng: 100.51323000000001 },
  { lat: 13.742030000000002, lng: 100.51317 },
  { lat: 13.742130000000001, lng: 100.51313 },
  { lat: 13.74224, lng: 100.51312000000001 },
  { lat: 13.742280000000001, lng: 100.51287 },
  { lat: 13.74238, lng: 100.51208000000001 },
  { lat: 13.742500000000001, lng: 100.51114000000001 },
  { lat: 13.74252, lng: 100.51083000000001 },
  { lat: 13.74253, lng: 100.51070000000001 },
  { lat: 13.74272, lng: 100.51063 },
  { lat: 13.743050000000002, lng: 100.51051000000001 },
  { lat: 13.743300000000001, lng: 100.51043000000001 },
  { lat: 13.743680000000001, lng: 100.51030000000002 },
  { lat: 13.743810000000002, lng: 100.51011000000001 },
  { lat: 13.744200000000001, lng: 100.50953000000001 },
  { lat: 13.744330000000001, lng: 100.50928 },
  { lat: 13.744510000000002, lng: 100.50897 },
  { lat: 13.744670000000001, lng: 100.50873000000001 },
  { lat: 13.744190000000001, lng: 100.50835000000001 },
  { lat: 13.744090000000002, lng: 100.50827000000001 }
];

// console.log(dd.length);
// console.log("111111", dd);
const ddd = dd.map(i => {
  return [i.lat, i.lng];
});
// console.log(ddd);

const c = polyline.encode(ddd);
console.log(c);

const d = polyline.decode(c);

console.log(d.length);
console.log("22222", d);

// const latlng = new geometry.LatLng(13.714390874226, 100.47837674618);
// const latlng = new geometry.LatLng(13.6638, 100.5323);
// const latlng2 = new geometry.LatLng(13.6546, 100.5283);
// console.log(geometry.computeDistanceBetween(latlng, latlng2) <= 0.001);

d.forEach(i => {
  // const latlng2 = new geometry.LatLng(i[0], i[1]);

  // console.log(geometry.computeDistanceBetween(latlng, latlng2) <= 100);
  console.log(
    geolib.getDistance(
      { latitude: 13.742918064168, longitude: 100.50911217928 },
      { latitude: i[0], longitude: i[1] }
    ) <= 1000
  );
});
